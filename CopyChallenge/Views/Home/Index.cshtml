@using CopyChallenge.Models

<h2>Home</h2>
<script src="~/js/storage.js"></script>
<script>
    function condition(e){
        return e.rowType ==  'data'
    }
    var copymode = false
    const colorcopy = '#6495ED', colorpaste = '#FF7F50', selectioncolor = '#708090';
    function click(e){
        if(condition(e)){
            copymode = !copymode;
            console.log(e); e.cellElement.css('background-color', (copymode)? colorcopy : colorpaste)
        }
        
    }
    function doubleclick(e) {
        if (condition(e)) {
            console.log(e); e.cellElement.css('background-color', selectioncolor)
        }
    }

</script>
@(
Html.DevExtreme().DataGrid<SampleOrder>()
    .ShowBorders(true)
    .DataSource(d => d.Mvc().Controller("SampleOrders")
        .LoadAction("Get")
        .UpdateAction("Put")
        .DeleteAction("Delete")
        .InsertAction("Post")
        .Key("ID")
        )
    .Columns(columns => {
        columns.AddFor(m => m.OrderID);
        columns.AddFor(m => m.OrderDate);
        columns.AddFor(m => m.CustomerName);
        columns.AddFor(m => m.ShipCountry);
        columns.AddFor(m => m.ShipCity);
    })
    .OnCellClick(@"click")
    .OnCellDblClick(@"doubleclick")
    .Paging(p => p.PageSize(10))
    .FilterRow(f => f.Visible(true))
    .HeaderFilter(f => f.Visible(true))
    .GroupPanel(p => p.Visible(true))
    .Grouping(g => g.AutoExpandAll(false))
    .RemoteOperations(true)
    .Summary(s => s
        .TotalItems(totalItems => {
            totalItems.AddFor(m => m.ShipCity).SummaryType(SummaryType.Count);
        })
        .GroupItems(groupItems => {
            groupItems.Add().SummaryType(SummaryType.Count);
        })
    )/*
    .Editing(e =>
    {
        e.AllowAdding(true);
        e.AllowUpdating(true);
        e.AllowDeleting(true);
        e.Mode(GridEditMode.Batch);
    })*/
)

<script>
    var datab = {
        OrderID: 1020,
        OrderDate: "1996-07-05T00:00:00",
        CustomerName: "Anais Trujillo",
        CustomerId:null,
        ShipCountry: "Mexico",
        ShipCity: "Mexico City"
    };
    /*
    */
</script>
